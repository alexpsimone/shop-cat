{% extends 'base.html' %}

{% block title %}{{ procedure.title }}{% endblock %}

{% block js %}
    <script src="/static/js/procedure.jsx" type="text/jsx"></script>
{% endblock %}


{% block body %}

    <h1>Here's your procedure info!</h1>
    <br />
    <h1>{{ procedure.title }}</h1>
    <h3>Label: {{procedure.label }}</h3>

    <p>This procedure applies to the following cars:</p>
    <ul>
        {% for proc_car in proc_car_obj %}
        <li>
            <a href="/vehicle/{{ proc_car.car.make }}/{{ proc_car.car.model_year }}/{{ proc_car.car.model }}">
            {{ proc_car.car.model_year }}
            {{ proc_car.car.make }}
            {{ proc_car.car.model }}
            </a>
        </li>
        {% endfor %}
    </ul>    

    <p>You'll need {{ proc_num_tools }} tools for the job:</p>
    <ul>
        {% for proc_tool in proc_tool_obj %}
        <li>
            <a href="/tool/{{ proc_tool.tool.tool_id }}">
            {{ proc_tool.tool.name }}
            </a>
        </li>
        {% endfor %}
    </ul>

    <p>You'll need {{ proc_num_parts }} parts for the job:</p>
    <ul>
        {% for proc_part in proc_part_obj %}
        <li>{{ proc_part.part.name }}</li>
        {% endfor %}
    </ul>

    <p>Here are the steps in the procedure:</p>
    <ol>
        {% for step in steps %}
        <li>
            {{ step.step_text }}
            {% if step.reference != "No Ref Provided" %}
                <br />
                Reference:
                <a href="{{ step.reference }}">{{ step.reference }}</a>
            {% endif %}
        </li>
        {% endfor %}
    </ol>

    {% if procedure.user.nickname %}
        <p>This procedure was created by {{ procedure.user.nickname }}.</p>
    {% else %}
        <p>This procedure was created by {{ procedure.user.username }}.</p>
    {% endif %}

    <a href="/edit-procedure/{{ procedure.proc_id }}">Edit this procedure.</a>
    
    <a href="/home">Return Home</a>
{% endblock %}